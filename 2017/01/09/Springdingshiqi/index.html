<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="记录几种定时器的实现方式——仅仅在应用层面，简单的实现。本文在完成过程中参考了详解java定时任务、Spring定时任务的几种实现等文章。   实现定时器的几种方式 java.util.Timer与java.util.TimerTask。个人总结了一下，这种方式因为有一些缺陷，适合一些简单的定时任务。参考文章详解java定时任务，非常详细。 Spring与Quartz的结合，配置比较麻烦，公司的">
<meta property="og:type" content="article">
<meta property="og:title" content="Java定时器，Spring定时器极其部署方式">
<meta property="og:url" content="http://yoursite.com/2017/01/09/Springdingshiqi/index.html">
<meta property="og:site_name" content="xiake">
<meta property="og:description" content="记录几种定时器的实现方式——仅仅在应用层面，简单的实现。本文在完成过程中参考了详解java定时任务、Spring定时任务的几种实现等文章。   实现定时器的几种方式 java.util.Timer与java.util.TimerTask。个人总结了一下，这种方式因为有一些缺陷，适合一些简单的定时任务。参考文章详解java定时任务，非常详细。 Spring与Quartz的结合，配置比较麻烦，公司的">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://7xrt1z.com1.z0.glb.clouddn.com/7%60NPRRW5LO$@~YGF@B%5BMP7I.png">
<meta property="og:image" content="http://7xrt1z.com1.z0.glb.clouddn.com/StartSpringQuartz.png">
<meta property="og:image" content="http://7xrt1z.com1.z0.glb.clouddn.com/SpringTask.png">
<meta property="og:image" content="http://7xrt1z.com1.z0.glb.clouddn.com/SpringTaskComment.png">
<meta property="og:updated_time" content="2017-05-21T14:45:02.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java定时器，Spring定时器极其部署方式">
<meta name="twitter:description" content="记录几种定时器的实现方式——仅仅在应用层面，简单的实现。本文在完成过程中参考了详解java定时任务、Spring定时任务的几种实现等文章。   实现定时器的几种方式 java.util.Timer与java.util.TimerTask。个人总结了一下，这种方式因为有一些缺陷，适合一些简单的定时任务。参考文章详解java定时任务，非常详细。 Spring与Quartz的结合，配置比较麻烦，公司的">
<meta name="twitter:image" content="http://7xrt1z.com1.z0.glb.clouddn.com/7%60NPRRW5LO$@~YGF@B%5BMP7I.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2017/01/09/Springdingshiqi/"/>





  <title> Java定时器，Spring定时器极其部署方式 | xiake </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  














  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">xiake</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">go go go</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/01/09/Springdingshiqi/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="xiake">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://7xrt1z.com1.z0.glb.clouddn.com/katongtouxiang.PNG">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="xiake">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                Java定时器，Spring定时器极其部署方式
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-01-09T23:02:35+08:00">
                2017-01-09
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <ul>
<li>记录几种定时器的实现方式——仅仅在应用层面，简单的实现。本文在完成过程中参考了<a href="http://www.cnblogs.com/chenssy/p/3788407.html" target="_blank" rel="external">详解java定时任务</a>、<a href="http://gong1208.iteye.com/blog/1773177" target="_blank" rel="external">Spring定时任务的几种实现</a>等文章。</li>
</ul>
<hr>
<h3 id="实现定时器的几种方式"><a href="#实现定时器的几种方式" class="headerlink" title="实现定时器的几种方式"></a>实现定时器的几种方式</h3><ol>
<li>java.util.Timer与java.util.TimerTask。个人总结了一下，这种方式因为有一些缺陷，适合一些简单的定时任务。参考文章<a href="http://www.cnblogs.com/chenssy/p/3788407.html" target="_blank" rel="external">详解java定时任务</a>，非常详细。</li>
<li>Spring与Quartz的结合，配置比较麻烦，公司的老项目还在用这种方式。</li>
<li>Spring3.0以上版本自带的task，配置简单，新项目使用的这种方式。</li>
</ol>
<h3 id="两种部署方式（linux，项目使用spring的情况下）"><a href="#两种部署方式（linux，项目使用spring的情况下）" class="headerlink" title="两种部署方式（linux，项目使用spring的情况下）"></a>两种部署方式（linux，项目使用spring的情况下）</h3><ol>
<li>如果不是web工程，编写一个启动类，用于加载spring的配置文件启动spring容器，并编写启动java程序的脚本（参考<a href="http://www.cnblogs.com/duanxz/p/5581438.html" target="_blank" rel="external">不错的linux下通用的java程序启动脚本</a>）。</li>
<li>如果是web工程，将spring加进web.xml的监听器，随着web工程的启动而启动。</li>
</ol>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><h4 id="1-java-util-Timer与java-util-TimerTask简单实例。"><a href="#1-java-util-Timer与java-util-TimerTask简单实例。" class="headerlink" title="1. java.util.Timer与java.util.TimerTask简单实例。"></a>1. java.util.Timer与java.util.TimerTask简单实例。</h4><p>(1) 、创建任务类<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">  <span class="keyword">package</span> org.my.timertask;</div><div class="line">  <span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line">  <span class="keyword">import</span> java.util.Date;</div><div class="line">  <span class="keyword">import</span> java.util.TimerTask;</div><div class="line">  <span class="comment">/**</span></div><div class="line"><span class="comment">   * 创建任务类，继承TimerTask,重写其run方法，方法体指定要执行的任务。</span></div><div class="line"><span class="comment">   * <span class="doctag">@author</span> fasen</span></div><div class="line"><span class="comment">   *</span></div><div class="line"><span class="comment">   */</span></div><div class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerTaskDemo</span> <span class="keyword">extends</span> <span class="title">TimerTask</span></span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</div><div class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd hh:mm:ss"</span>);</div><div class="line">		System.out.println(<span class="string">"这是java.util.TimeTask在执行任务,本次执行时间是："</span>+sdf.format(<span class="keyword">new</span> Date()));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>(2)、使用调度对象进行调用<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"> <span class="keyword">package</span> org.my.timertask;</div><div class="line"> <span class="keyword">import</span> java.util.Timer;</div><div class="line"> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TimerDemo</span> </span>&#123;</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">	<span class="comment">//创建Timer对象，并调用schedule方法（有四个重载方法）</span></div><div class="line">	Timer t = <span class="keyword">new</span> Timer();</div><div class="line">	<span class="comment">//传递参数。第一个参数是TimerTask对象（指定要执行的任务）,第二个参数是延迟时间，第三个参数是时间间隔（毫秒）</span></div><div class="line">	t.schedule(<span class="keyword">new</span> TimerTaskDemo(),<span class="number">0</span>,<span class="number">5000</span>);</div><div class="line">&#125;</div><div class="line"> &#125;</div></pre></td></tr></table></figure></p>
<p>运行结果：<br><img src="http://7xrt1z.com1.z0.glb.clouddn.com/7%60NPRRW5LO$@~YGF@B%5BMP7I.png" alt="运行结果"></p>
<h4 id="2-Spring与Quartz的结合使用"><a href="#2-Spring与Quartz的结合使用" class="headerlink" title="2. Spring与Quartz的结合使用"></a>2. Spring与Quartz的结合使用</h4><p> (1)、导入jar包：org.quartz-scheduler，我使用的是2.1.1。我用的Spring的版本是Spring4.0.2，如果使用quartz2.x与Spring3.1以上的版本，配置的bean类必须与本配置一致。根据Spring和quart的版本不同，会有不同的配置。quartz2.x与Spring3.1以上的版本将老版本很多类名加了Factory，比如将CronTriggerBean修改为CronTriggerFactoryBean、将JobDetailBean修改为JobDetailFactoryBean等等，如果用quartz2.x与Spring3.1以上的版本的jar，而使用低版本的配置——CronTriggerBean和JobDetailBean话，会出现类似以下的错误<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">org</span>.<span class="title">springframework</span>.<span class="title">scheduling</span>.<span class="title">quartz</span>.<span class="title">JobDetailBean</span> <span class="title">has</span> <span class="title">interface</span> <span class="title">org</span>.<span class="title">quartz</span>.<span class="title">JobDetail</span> <span class="title">as</span> <span class="title">super</span> <span class="title">class</span></span></div></pre></td></tr></table></figure></p>
<p>这个错误，即代表jar包版本和配置不一致。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">properties</span>&gt;</span>  </div><div class="line">      <span class="comment">&lt;!-- spring版本号 --&gt;</span>  </div><div class="line">      <span class="tag">&lt;<span class="name">spring.version</span>&gt;</span>4.0.2.RELEASE<span class="tag">&lt;/<span class="name">spring.version</span>&gt;</span> </div><div class="line">      <span class="tag">&lt;<span class="name">failOnMissingWebXml</span>&gt;</span>false<span class="tag">&lt;/<span class="name">failOnMissingWebXml</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">properties</span>&gt;</span> </div><div class="line"><span class="comment">&lt;!-- spring核心包 --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.quartz-scheduler<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>quartz<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">	    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line"> <span class="comment">&lt;!-- spring核心包 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">dependency</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span>  </div><div class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;spring.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>(2)、编写任务类，Spring与Quartz的结合使用，其任务类有两种方式——任务类继承QuartzJobBean类、任务类不继承特定类。</p>
<blockquote>
<p>任务类继承QuartzJobBean类，需要重写executeInternal方法：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringQuartz;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">import</span> org.quartz.JobExecutionContext;</div><div class="line"><span class="keyword">import</span> org.quartz.JobExecutionException;</div><div class="line"><span class="keyword">import</span> org.springframework.scheduling.quartz.QuartzJobBean;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SpringQuartzJob</span> <span class="keyword">extends</span> <span class="title">QuartzJobBean</span> </span>&#123;</div><div class="line">	<span class="meta">@Override</span></div><div class="line">	<span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">executeInternal</span><span class="params">(JobExecutionContext arg0)</span> <span class="keyword">throws</span> JobExecutionException </span>&#123;	</div><div class="line">		SimpleDateFormat sdf  = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">		System.out.println(<span class="string">"这是SpringQuartzJob定时任务...任务类继承QuartzJobBean,当前时间："</span>+sdf.format(<span class="keyword">new</span> Date()));	</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>任务类不继承特定类，POJO，方法名自定义：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringQuartz;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NotExtendSpringQuartzJob</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dosomething</span><span class="params">()</span></span>&#123;</div><div class="line">		SimpleDateFormat sdf  = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">		System.out.println(<span class="string">"这是NotExtendSpringQuartzJob定时任务...任务类不继承特定类，是POJO,现在时间："</span>+sdf.format(<span class="keyword">new</span> Date()));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
</blockquote>
<p> (3)、spring配置：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context/spring-context-4.0.xsd    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd"</span>&gt;</span>  </div><div class="line"><span class="comment">&lt;!-- 定时任务配置（任务类继承特定的类） 开头 --&gt;</span></div><div class="line">    <span class="comment">&lt;!-- 定时任务bean,任务执行类 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"springQuartzJob"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.JobDetailFactoryBean"</span> &gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobClass"</span> <span class="attr">value</span>=<span class="string">"org.my.SpringQuartz.SpringQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="comment">&lt;!-- 任务类的属性map,可以设置参数，我这里没有属性 --&gt;</span></div><div class="line">		<span class="comment">&lt;!-- &lt;property name="jobDataAsMap"&gt;  </span></div><div class="line"><span class="comment">			&lt;map&gt;  </span></div><div class="line"><span class="comment">			&lt;entry key="timeout" value="0" /&gt;  </span></div><div class="line"><span class="comment">			&lt;/map&gt;  </span></div><div class="line"><span class="comment">		&lt;/property&gt;   --&gt;</span></div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </div><div class="line">	<span class="comment">&lt;!-- 任务执行类对应的触发器：第一种（按照一定的时间间隔触发） --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"springQuartzJobTrigger1"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SimpleTriggerFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"springQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"startDelay"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span><span class="comment">&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"repeatInterval"</span> <span class="attr">value</span>=<span class="string">"30000"</span> /&gt;</span><span class="comment">&lt;!-- 每30秒调度一次 --&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 任务执行类对应的触发器：第二种（按照指定时间触发，如每天12点） --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"springQuartzJobTrigger2"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"springQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="comment">&lt;!-- 每天21:37运行一次 --&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cronExpression"</span> <span class="attr">value</span>=<span class="string">"0 37 21 * * ?"</span> /&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 调度工厂 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"triggers"</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">list</span>&gt;</span>  </div><div class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"springQuartzJobTrigger1"</span> /&gt;</span>  </div><div class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"springQuartzJobTrigger2"</span> /&gt;</span></div><div class="line">		<span class="tag">&lt;/<span class="name">list</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </div><div class="line"><span class="comment">&lt;!-- 定时任务配置（任务类继承特定的类） 结尾 --&gt;</span>	</div><div class="line"><span class="comment">&lt;!-- 定时任务配置（任务类不继承特定的类）开头 --&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 定时任务bean,任务执行类 --&gt;</span></div><div class="line">	 <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"notExtendSpringQuartzJob"</span>  <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetObject"</span>&gt;</span>  <span class="comment">&lt;!-- 指定任务类 --&gt;</span></div><div class="line">			<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.my.SpringQuartz.NotExtendSpringQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"targetMethod"</span> <span class="attr">value</span>=<span class="string">"dosomething"</span> /&gt;</span>  <span class="comment">&lt;!-- 制定任务类中的方法 --&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"concurrent"</span> <span class="attr">value</span>=<span class="string">"false"</span> /&gt;</span><span class="comment">&lt;!-- 作业不并发调度 --&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span> </div><div class="line">	<span class="comment">&lt;!-- 任务执行类对应的触发器：第一种（按照一定的时间间隔触发） --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"notExtendSpringQuartzJobTrigger1"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SimpleTriggerFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"notExtendSpringQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"startDelay"</span> <span class="attr">value</span>=<span class="string">"0"</span> /&gt;</span><span class="comment">&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"repeatInterval"</span> <span class="attr">value</span>=<span class="string">"30000"</span> /&gt;</span><span class="comment">&lt;!-- 每30秒调度一次 --&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 任务执行类对应的触发器：第二种（按照指定时间触发，如每天12点） --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"notExtendSpringQuartzJobTrigger2"</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.CronTriggerFactoryBean"</span>&gt;</span></div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"jobDetail"</span> <span class="attr">ref</span>=<span class="string">"notExtendSpringQuartzJob"</span> /&gt;</span>  </div><div class="line">		<span class="comment">&lt;!-- 每天21:37运行一次 --&gt;</span>  </div><div class="line">		<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"cronExpression"</span> <span class="attr">value</span>=<span class="string">"0 37 21 * * ?"</span> /&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line">	<span class="comment">&lt;!-- 调度工厂 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.scheduling.quartz.SchedulerFactoryBean"</span>&gt;</span>  </div><div class="line">	    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"triggers"</span>&gt;</span>  </div><div class="line">	    <span class="tag">&lt;<span class="name">list</span>&gt;</span>  </div><div class="line">	   		<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"notExtendSpringQuartzJobTrigger1"</span> /&gt;</span>  </div><div class="line">			<span class="tag">&lt;<span class="name">ref</span> <span class="attr">bean</span>=<span class="string">"notExtendSpringQuartzJobTrigger2"</span> /&gt;</span>  </div><div class="line">	    <span class="tag">&lt;/<span class="name">list</span>&gt;</span>  </div><div class="line">	    <span class="tag">&lt;/<span class="name">property</span>&gt;</span>  </div><div class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 定时任务配置（任务类不继承特定的类）结尾 --&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>(4)、启动。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringQuartz;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartSpringQuartz</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">		ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext.xml"</span>);	</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>eclipse执行结果如下，红框外是根据指定时间间隔触发的——SimpleTriggerFactoryBean，红框内的是设定指定时间触发——CronTriggerFactoryBean，此处配置的是21:37分。<img src="http://7xrt1z.com1.z0.glb.clouddn.com/StartSpringQuartz.png" alt="执行结果">  </p>
<h4 id="3-Spring3-0以上版本自带的task。"><a href="#3-Spring3-0以上版本自带的task。" class="headerlink" title="3. Spring3.0以上版本自带的task。"></a>3. Spring3.0以上版本自带的task。</h4><p><strong>配置文件方式：</strong><br>(1)、编写任务类，POJO。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringTask;</div><div class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line"><span class="keyword">import</span> java.util.Date;</div><div class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line"><span class="meta">@Component</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaskJob</span> </span>&#123;</div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dosomething</span><span class="params">()</span></span>&#123;</div><div class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">		System.out.println(<span class="string">"这是SpringTask定时任务，当前时间："</span>+sdf.format(<span class="keyword">new</span> Date()));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>(2)、Spring配置（applicationContext-SpringTask.xml），在头部文件中加入了task声明。如果没有声明，会出现类似以下的异常<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">“org.xml.sax.SAXParseException; lineNumber: <span class="number">19</span>; columnNumber: <span class="number">24</span>; cvc-complex-type.2.4.c: 通配符的匹配很全面, 但无法找到元素 <span class="string">'task:scheduled-tasks'</span> 的声明。”</div></pre></td></tr></table></figure></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  </div><div class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span>  </span></div><div class="line"><span class="tag">    <span class="attr">xmlns:task</span>=<span class="string">"http://www.springframework.org/schema/task"</span></span></div><div class="line"><span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/context/spring-context-4.0.xsd    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc    </span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd</span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/task</span></span></div><div class="line"><span class="tag"><span class="string">                        http://www.springframework.org/schema/task/spring-task-4.0.xsd"</span>&gt;</span>  </div><div class="line">    <span class="comment">&lt;!-- 自动扫描(并启用注解)Spring-task定时方式可以用注解 --&gt;</span>  </div><div class="line">    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"org.my.SpringTask"</span> /&gt;</span>  </div><div class="line"></div><div class="line">	<span class="comment">&lt;!-- Spring task定时配置 --&gt;</span></div><div class="line">	<span class="tag">&lt;<span class="name">task:scheduled-tasks</span>&gt;</span>   </div><div class="line">		 <span class="comment">&lt;!-- 每15秒执行一次，此处可设置为以指定时间间隔或者指定的时间执行，具体由cron表达式决定 --&gt;</span></div><div class="line">	        <span class="tag">&lt;<span class="name">task:scheduled</span> <span class="attr">ref</span>=<span class="string">"taskJob"</span> <span class="attr">method</span>=<span class="string">"dosomething"</span> <span class="attr">cron</span>=<span class="string">"0/15 * * * * ?"</span>/&gt;</span>  </div><div class="line">	<span class="tag">&lt;/<span class="name">task:scheduled-tasks</span>&gt;</span> </div><div class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></div></pre></td></tr></table></figure>
<p>(3)、启动<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringTask;</div><div class="line"><span class="keyword">import</span> org.springframework.context.ApplicationContext;</div><div class="line"><span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartSpringTask</span> </span>&#123;</div><div class="line"></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">		ApplicationContext ctx = <span class="keyword">new</span> ClassPathXmlApplicationContext(<span class="string">"applicationContext-SpringTask.xml"</span>);</div><div class="line"></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>运行结果：<br><img src="http://7xrt1z.com1.z0.glb.clouddn.com/SpringTask.png" alt="运行结果"><br><strong>注解方式：</strong><br>(1)、任务类：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">package</span> org.my.SpringTaskComment;</div><div class="line"></div><div class="line">  <span class="keyword">import</span> java.text.SimpleDateFormat;</div><div class="line">  <span class="keyword">import</span> java.util.Date;</div><div class="line"></div><div class="line">  <span class="keyword">import</span> org.springframework.scheduling.annotation.Scheduled;</div><div class="line">  <span class="keyword">import</span> org.springframework.stereotype.Component;</div><div class="line">  <span class="meta">@Component</span></div><div class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TaskJobComment</span> </span>&#123;</div><div class="line">	<span class="meta">@Scheduled</span>(cron=<span class="string">"0/15 * * * * ?"</span>)<span class="comment">//每15秒执行一次</span></div><div class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dosomething</span><span class="params">()</span></span>&#123;</div><div class="line">		SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</div><div class="line">		System.out.println(<span class="string">"这是SpringTask定时任务注解版，当前时  间："</span>+sdf.format(<span class="keyword">new</span> Date()));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>(2)、Spring开启注解扫描</p>
<pre><code class="html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
<span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span>  </span>
<span class="tag">    <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:p</span>=<span class="string">"http://www.springframework.org/schema/p"</span>  </span>
<span class="tag">    <span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span>  </span>
<span class="tag">    <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span>  </span>
<span class="tag">    <span class="attr">xmlns:task</span>=<span class="string">"http://www.springframework.org/schema/task"</span></span>
<span class="tag">    <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans    </span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/beans/spring-beans-4.0.xsd    </span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/context    </span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/context/spring-context-4.0.xsd    </span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc    </span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd</span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/task</span></span>
<span class="tag"><span class="string">                        http://www.springframework.org/schema/task/spring-task-4.0.xsd"</span>&gt;</span>  
    <span class="comment">&lt;!-- 自动扫描(并启用注解)--&gt;</span>  
    <span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"org.my"</span> /&gt;</span>  
  <span class="comment">&lt;!-- 开启这个扫描才能使用定时注解，这个配置项有一些非必需参数（属性），比如executor、scheduler、mode等等--&gt;</span> 
     <span class="tag">&lt;<span class="name">task:annotation-driven</span>/&gt;</span>
<span class="tag">&lt;/<span class="name">beans</span>&gt;</span>
</code></pre>
<p>(3)、启动</p>
<pre><code class="java"><span class="keyword">package</span> org.my.SpringTaskComment;
 <span class="keyword">import</span> org.springframework.context.ApplicationContext;
 <span class="keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;
 <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StartSpringTaskComment</span> </span>{
    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>{        
        ApplicationContext ctx = <span class="keyword">new</span>  ClassPathXmlApplicationContext(<span class="string">"applicationContext-SpringTask.xml"</span>);
    }
}
</code></pre>
<p>执行结果：<br><img src="http://7xrt1z.com1.z0.glb.clouddn.com/SpringTaskComment.png" alt="执行结果"></p>
<p>至此，三种定时方式简单实现了一遍，更多的配置参数，以及效率、性能在此未作深入研究。</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/12/24/weixin_jieshoubinghuifuwenbenxiaoxi/" rel="next" title="微信Java开发系列 二、接收并回复文本消息">
                <i class="fa fa-chevron-left"></i> 微信Java开发系列 二、接收并回复文本消息
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/14/maxSubArray/" rel="prev" title="求一个数组中最大的子数组之和以及起终点">
                求一个数组中最大的子数组之和以及起终点 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="http://7xrt1z.com1.z0.glb.clouddn.com/katongtouxiang.PNG"
               alt="xiake" />
          <p class="site-author-name" itemprop="name">xiake</p>
           
              <p class="site-description motion-element" itemprop="description">just some note</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">9</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">2</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="http://www.jianshu.com/u/28fe84130b9c" target="_blank" title="简书">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  简书
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#实现定时器的几种方式"><span class="nav-number">1.</span> <span class="nav-text">实现定时器的几种方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两种部署方式（linux，项目使用spring的情况下）"><span class="nav-number">2.</span> <span class="nav-text">两种部署方式（linux，项目使用spring的情况下）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例"><span class="nav-number">3.</span> <span class="nav-text">实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-java-util-Timer与java-util-TimerTask简单实例。"><span class="nav-number">3.1.</span> <span class="nav-text">1. java.util.Timer与java.util.TimerTask简单实例。</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Spring与Quartz的结合使用"><span class="nav-number">3.2.</span> <span class="nav-text">2. Spring与Quartz的结合使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Spring3-0以上版本自带的task。"><span class="nav-number">3.3.</span> <span class="nav-text">3. Spring3.0以上版本自带的task。</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">xiake</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  





  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  


  




	





  





  





  






  





  

  

  

  

</body>
</html>
